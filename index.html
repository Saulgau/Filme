<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FilmFrei: Dein kostenloses Streaming-Erlebnis – 100% werbefrei!</title>
    <div style="color: red; font-weight: bold; border: 2px solid red; padding: 10px; background-color: #ffe6e6;">
    Diese Seite bietet nur Filme in guter Qualität an. Videos, die im Kino aufgenommen wurden, werden hier nicht angeboten. Daher kann es zu längeren Wartezeiten kommen, bis die Filme hier erscheinen.
    </div>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#000000">
</head>
<body class="bg-gray-900 text-white transition-colors duration-300">
    <div class="container mx-auto px-4 py-8">
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-center mb-6">FilmFrei: Dein kostenloses Streaming-Erlebnis – 100% werbefrei!</h1>
            <div class="flex justify-center items-center space-x-4 flex-wrap">
                <input type="text" id="search-query" placeholder="Filmtitel suchen..." class="p-2 rounded-full border border-gray-700 bg-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400 flex-grow max-w-md">
                <button onclick="searchMovies()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full transition duration-300 ease-in-out">
                    Suchen
                </button>
            </div>
        </header>
        <main>
            <section id="horror-section">
                <h2 class="text-2xl font-semibold mb-4">Horror</h2>
                <div id="horror-movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Horrorfilme werden hier eingefügt -->
                </div>
            </section>
            
            <section id="musical-section">
                <h2 class="text-2xl font-semibold mb-4">Musical</h2>
                <div id="musical-movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Musicalfilme werden hier eingefügt -->
                </div>
            </section>
            
            <section id="fantasy-section" class="mt-12">
                <h2 class="text-2xl font-semibold mb-4">Fantasy</h2>
                <div id="fantasy-movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Fantasyfilme werden hier eingefügt -->
                </div>
            </section>

            <section id="action-section" class="mt-12">
                <h2 class="text-2xl font-semibold mb-4">Action</h2>
                <div id="action-movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Actionfilme werden hier eingefügt -->
                </div>
            </section>
            
            <section id="comedy-section">
                <h2 class="text-2xl font-semibold mb-4">Komödie</h2>
                <div id="comedy-movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Komödienfilme werden hier eingefügt -->
                </div>
            </section>
            
            <section id="kids-section">
                <h2 class="text-2xl font-semibold mb-4">Kinderfilme</h2>
                <div id="kids-movies" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                    <!-- Kinderfilme werden hier eingefügt -->
                </div>
            </section>
            
            <!-- Weitere Sektionen für andere Filmkategorien -->
        </main>
    </div>
    <script>
    // Horrorfilme
    const horrorMovies = [
        {
            title: "Imaginary",
            image: "https://de.web.img2.acsta.net/pictures/24/01/31/08/13/2388278.jpg",
            link: "https://3jtpuy07im.swiftload.io/serve/3/zg4v2y0cl8r/kqkxn7u_G9Lcu1u-Ipdygg/1725296331/zg4v2y0cl8r//high.m3u8"
        },
        {
            title: "A Quiet Place: Tag Eins !Bald!",
            image: "https://de.web.img3.acsta.net/img/51/62/5162f5126aae0fc89b7102f2524964b5.jpg",
            link: ""
        }
    ];
    // Musicalfilme
    const musicalMovies = [
        {
            title: "Elvis",
            image: "https://www.mairie-leluc.com/wp-content/uploads/2022/06/0417000.jpg-r_1920_1080-f_jpg-q_x-xxyxx.jpg",
            link: "https://3jtpuy07im.swiftload.io/serve/3/42t6g8weimw/hhOzTyMWmzkPc5LTBQtCBg/1725303013/42t6g8weimw//high.m3u8"
        }
    ];
    // Fantasyfilme
    const fantasyMovies = [
        {
            title: "Harry Potter 1 !Bald!",
            image: "https://musicart.xboxlive.com/7/8fe05000-0000-0000-0000-000000000002/504/image.jpg",
            link: ""
        }
    ];
    // Komödienfilme
    const comedyMovies = [
        {
            title: "Chantal im Märchenland",
            image: "https://de.web.img3.acsta.net/pictures/24/03/01/19/29/3351541.jpg",
            link: "https://3jtpuy07im.swiftload.io/serve/3/e3eq2m4qz9t/reBKNUZNitBLrtdkFPcBEA/1725292119/e3eq2m4qz9t//high.m3u8"
        }
    ];
    // Kinderfilme
    const kidsMovies = [
        {
            title: "Alles steht Kopf 2",
            image: "https://de.web.img3.acsta.net/img/44/7d/447d0ad9c57e73e5c17b3e07c37b97c8.jpg",
            link: "https://3jtpuy07im.swiftload.io/serve/3/obxbvt06dz8/QlaH3NXuOEv2RjdXVcDEfQ/1725191511/obxbvt06dz8//high.m3u8"
        },
        {
            title: "Ich - Einfach Unverbesserlich 4",
            image: "https://cdn.kinocheck.com/i/b238psiahp.jpg",
            link: "https://3jtpuy07im.swiftload.io/serve/3/kfvoc2p3auf/OFRNicTzpYI7Zhl0pRoHWQ/1725129465/kfvoc2p3auf//high.m3u8"
        }
    ];

    // Actionfilme
    const actionMovies = [
        {
            title: "John Wick !Bald!",
            image: "https://i.pinimg.com/originals/82/0b/ee/820bee1c461bddf7fc8af07fdd1abd11.jpg",
            link: ""
        }
    ];

// Filme anzeigen
function displayMovies(category, movieList) {
    const sectionElement = document.getElementById(`${category}-movies`);
    sectionElement.innerHTML = movieList.map(movie => `
        <div class="bg-gray-800 rounded-lg shadow-md overflow-hidden transition-transform duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-lg">
            <div style="width: 100%; padding-top: 150%; position: relative;">
                <img src="${movie.image}" alt="${movie.title}" 
                     style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;"
                     onerror="this.src='https://via.placeholder.com/200x300?text=Bild+nicht+verfügbar'">
            </div>
            <div class="p-4">
                <h2 class="text-xl font-semibold mb-2 overflow-hidden text-ellipsis whitespace-nowrap">${movie.title}</h2>
                <button onclick="openPlayer('${movie.link}', '${movie.title}')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-300 ease-in-out w-full">
                    Film ansehen
                </button>
            </div>
        </div>
    `).join('');
}

    // Player öffnen
    function openPlayer(m3u8Url, title) {
        const playerWindow = window.open("", "_blank");
        playerWindow.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Filmwiedergabe</title>
                <style>
                    body { margin: 0; background-color: #000; display: flex; justify-content: center; align-items: center; height: 100vh; }
                    #videoPlayer { width: 100%; max-width: 1280px; height: auto; max-height: 90vh; }
                </style>
            </head>
            <body>
                <video id="videoPlayer" controls></video>
                <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"><\/script>
                <script>
                    const video = document.getElementById('videoPlayer');
                    const m3u8Url = '${m3u8Url}';
                    const cookieName = 'videoTime_' + encodeURIComponent('${title}');
                    
                    // Zeit aus dem Cookie laden
                    const savedTime = parseFloat(getCookie(cookieName)) || 0;

                    if (Hls.isSupported()) {
                        const hls = new Hls();
                        hls.loadSource(m3u8Url);
                        hls.attachMedia(video);
                        hls.on(Hls.Events.MANIFEST_PARSED, function () {
                            video.currentTime = savedTime;
                            video.play();
                        });
                    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                        video.src = m3u8Url;
                        video.addEventListener('loadedmetadata', function () {
                            video.currentTime = savedTime;
                            video.play();
                        });
                    }

                    // Zeit beim Schließen des Fensters speichern
                    window.addEventListener('beforeunload', function () {
                        setCookie(cookieName, video.currentTime, 365);
                    });

                    function getCookie(name) {
                        const value = \`; \${document.cookie}\`;
                        const parts = value.split(\`; \${name}=\`);
                        if (parts.length === 2) return parts.pop().split(';').shift();
                    }

                    function setCookie(name, value, days) {
                        const expires = new Date(Date.now() + days * 864e5).toUTCString();
                        document.cookie = name + '=' + value + '; expires=' + expires + '; path=/';
                    }
                <\/script>
            </body>
            </html>
        `);
    }

    // Suchfunktion
    function searchMovies() {
        const query = document.getElementById("search-query").value.toLowerCase();
        filterMovies("horror", horrorMovies, query);
        filterMovies("musical", musicalMovies, query);
        filterMovies("fantasy", fantasyMovies, query);
        filterMovies("action", actionMovies, query);
        filterMovies("comedy", comedyMovies, query);
        filterMovies("kids", kidsMovies, query);
    }

    // Filme filtern
    function filterMovies(category, movieList, query) {
        const filteredMovies = movieList.filter(movie => movie.title.toLowerCase().includes(query));
        displayMovies(category, filteredMovies);
    }

    // Initialisierung der Filme
    function init() {
        displayMovies("horror", horrorMovies);
        displayMovies("musical", musicalMovies);
        displayMovies("fantasy", fantasyMovies);
        displayMovies("action", actionMovies);
        displayMovies("comedy", comedyMovies);
        displayMovies("kids", kidsMovies);
    }

    // Seite initialisieren
    window.onload = init;
</script>
</body>
</html>
